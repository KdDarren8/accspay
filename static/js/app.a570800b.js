(function(e){function t(t){for(var o,a,n=t[0],c=t[1],l=t[2],u=0,d=[];u<n.length;u++)a=n[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,a=1;a<r.length;a++){var n=r[a];0!==i[n]&&(o=!1)}o&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var o={},a={app:0},i={app:0},s=[];function n(e){return c.p+"static/js/"+({}[e]||e)+"."+{"chunk-5ff2dffe":"c55e6b3e","chunk-4b5fcb3e":"c148cc7b","chunk-cbceeeb8":"63ef7d92","chunk-68a891dd":"9810099d","chunk-73ebf44c":"94b481b7","chunk-8b7264e2":"d5ece626","chunk-9780a9a0":"b1630949","chunk-e5a003ec":"534629d6"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"chunk-4b5fcb3e":1,"chunk-cbceeeb8":1,"chunk-68a891dd":1,"chunk-73ebf44c":1,"chunk-8b7264e2":1,"chunk-9780a9a0":1,"chunk-e5a003ec":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var o="static/css/"+({}[e]||e)+"."+{"chunk-5ff2dffe":"31d6cfe0","chunk-4b5fcb3e":"2f49a15e","chunk-cbceeeb8":"a7135ede","chunk-68a891dd":"39470057","chunk-73ebf44c":"60bf84c8","chunk-8b7264e2":"2aff78ed","chunk-9780a9a0":"6aa499c9","chunk-e5a003ec":"fb087ee3"}[e]+".css",i=c.p+o,s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var l=s[n],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===i))return t()}var d=document.getElementsByTagName("style");for(n=0;n<d.length;n++){l=d[n],u=l.getAttribute("data-href");if(u===o||u===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var o=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete a[e],m.parentNode.removeChild(m),r(s)},m.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){a[e]=0})));var o=i[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise((function(t,r){o=i[e]=[t,r]}));t.push(o[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=n(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var r=i[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,r[1](d)}i[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(r,o,function(t){return e[t]}.bind(null,o));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://cdn.jsdelivr.net/gh/kd-darren/accspay/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"06b0":function(e,t,r){"use strict";r("b329")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},2:function(e,t){},3:function(e,t){},"3ec5":function(e,t,r){"use strict";r("4c70")},4:function(e,t){},"421e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAAAXNSR0IArs4c6QAAAHVQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////5YtmQAAAACZ0Uk5TAAIEDRgjLzc/SExXXF1kamxucXV3fX+Cg6Wtsr/HzODl7fD5/P5Hx8JrAAAAuElEQVQY03VR1xbCIAyl21pq9wBEoCP//4l2RPAcbV5yCTc3i5DD4kHqWcshJs4ivhrWlz0zK48+wXRS1D+QT9WUYnARgU0LxHKEo0l4u0+eye48Me0iXJ3MBpqTrfhWfaVnrn87tQldYzIYfIT3EL/NQCTDOhlkiJgkukecQ46o12QuET/ggaicHbeAwnGtbg2107U9tNC6Hmy/HXRYduvXzjbC6Gaze6he1dce/u/sYr8Xt/i92xvYaA+WkIyy+AAAAABJRU5ErkJggg=="},4360:function(e,t,r){"use strict";var o=r("2b0e"),a=r("2f62"),i=r("5d2d");o["default"].use(a["a"]);var s="toutiao-user";t["a"]=new a["a"].Store({state:{user:Object(i["a"])(s),isDialog:!1,product:"",detailID:""},getters:{},mutations:{shareIsDialog:function(e,t){e.isDialog=t},setUser:function(e,t){e.user=t,Object(i["c"])(s,this.state.user)},product:function(e,t){e.product=t},detailID:function(e,t){e.detailID=t.productID}},actions:{},modules:{}})},"4c70":function(e,t,r){},"4d5f":function(e,t,r){e.exports=r.p+"static/img/unfold.ead4d0e8.png"},5:function(e,t){},"517b":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"home-container"},[e.isRouterAlive?r("head-login"):e._e(),r("router-view"),r("Footer")],1)])},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{style:{width:"100%",background:"#b35335"}},[r("nav",{staticClass:"header"},[r("div",{staticClass:"left"},[r("img",{attrs:{src:e.logoImg,alt:""},on:{click:e.goHome}})]),r("div",{staticClass:"right"},[r("ul",[e.isToken?r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.loginDialog.apply(null,arguments)}}},[e._v("登錄")])]):r("div",{staticClass:"flexRight"},[r("li",[r("router-link",{attrs:{to:{name:"information"}}},[e._v("個人信息")])],1),r("li",[r("router-link",{attrs:{to:{name:"myOrder"}}},[e._v("我的訂單")])],1),r("li",[r("router-link",{attrs:{to:{name:"recharge"}}},[e._v("賬戶充值")])],1),r("li",[r("router-link",{attrs:{to:{name:"record"}}},[e._v("交易記錄")])],1),r("li",[r("router-link",{attrs:{to:{name:"stationNews"}}},[e._v("站內信息")])],1),r("li",[r("el-dropdown",{on:{command:e.handleCommand}},[r("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.currentUser)),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"g"}},[e._v("退出")])],1)],1)],1)])])])]),r("el-dialog",{attrs:{title:"用戶註冊",visible:e.registerDialogVisible,width:"366px",center:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.registerDialogVisible=t},close:e.closeRegister}},[r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,size:"medium","hide-required-asterisk":!0,"status-icon":"",rules:e.rules2}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"請輸入郵箱","prefix-icon":"el-icon-user"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",autocomplete:"off",placeholder:"請輸入密碼"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{style:{width:"66%"},attrs:{placeholder:"請輸入驗證碼"},model:{value:e.ruleForm2.code,callback:function(t){e.$set(e.ruleForm2,"code",t)},expression:"ruleForm2.code"}}),r("img",{staticClass:"imgC",attrs:{src:e.imgCode,alt:""},on:{click:e.getCode}})],1),r("el-form-item",[r("div",{staticClass:"r-button",on:{click:function(t){return e.registerForm("ruleForm2")}}},[e._v("註冊")])])],1),r("div",{staticClass:"sign-up-now"},[e._v("已有賬號？"),r("span",{on:{click:e.registerChange}},[e._v("馬上登錄")])])],1),r("el-dialog",{attrs:{title:"用戶登錄",visible:e.loginDialogVisible,width:"366px",center:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.loginDialogVisible=t},close:e.close}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,size:"medium","hide-required-asterisk":!0,"status-icon":"",rules:e.rules}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"請輸入用戶名或郵箱","prefix-icon":"el-icon-user"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",autocomplete:"off",placeholder:"請輸入密碼"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{style:{width:"66%"},attrs:{placeholder:"請輸入驗證碼"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}}),r("img",{staticClass:"imgC",attrs:{src:e.imgCode,alt:""},on:{click:e.getCode}})],1),r("el-form-item",[r("div",{staticClass:"r-button",on:{click:function(t){return e.loginForm("ruleForm")}}},[e._v("登錄")])])],1),r("div",{staticClass:"sign-up-now"},[e._v("還沒有賬號？"),r("span",{on:{click:e.loginChange}},[e._v("馬上註冊")])])],1)],1)},n=[],c=r("1da1"),l=(r("96cf"),r("c24f")),u=(r("c1fb"),r("4360")),d=r("5d2d"),m={username:[{required:!0,message:"請輸入用戶名或郵箱",trigger:"blur"},{max:30,message:"最大30個字符",trigger:"blur"}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}],code:[{required:!0,message:"請輸入驗證碼",trigger:"blur"}]},p={username:[{required:!0,message:"請輸入郵箱",trigger:"blur"},{type:"email",message:"請輸入正確的郵箱",trigger:["blur","change"]}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}],code:[{required:!0,message:"請輸入驗證碼",trigger:"blur"}]},f={name:"head-login",created:function(){this.getCode(),this.userInfo(),console.log(this.$route.path)},mounted:function(){},computed:{monitor:function(){return this.$store.state.isDialog}},watch:{monitor:function(){this.loginDialogVisible=this.$store.state.isDialog}},inject:["reload"],data:function(){return{logoImg:r("bf6f"),isToken:!u["a"].state.user,loginDialogVisible:!1,registerDialogVisible:!1,ruleForm:{username:"",password:"",code:"",uuid:""},ruleForm2:{username:"",password:"",code:"",uuid:""},cre:"",imgCode:"",rules:m,rules2:p,currentUser:"",timeout:null}},methods:{change:function(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){}),500)},loginDialog:function(){this.loginDialogVisible=!0,this.getCode()},handleCommand:function(e){switch(console.log(e),e){case"a":this.goPersonalcenter();break;case"b":this.$router.push({name:"information"});break;case"c":this.$router.push({name:"myOrder"});break;case"d":this.$router.push({name:"recharge"});break;case"e":this.$router.push({name:"record"});break;case"f":this.$router.push({name:"stationNews"});break;case"g":Object(d["b"])("toutiao-user"),"/home"==this.$route.path||"/"==this.$route.path?console.log("bbb"):(console.log("aaa"),this.$router.push("/home")),setTimeout((function(){location.reload()}),100);break;default:break}},goHome:function(){console.log(this.$route.path),"/home"!=this.$route.path&&this.$router.push("/home")},goPersonalcenter:function(){this.$router.push({name:"Personalcenter"})},loginForm:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(l["b"])(t.ruleForm).then((function(e){200==e.data.code?(t.$message({message:"登錄成功",type:"success"}),t.$store.commit("setUser",e.data.token),t.userInfo(),console.log("/productDetails/"+t.$store.state.detailID,"路徑"),"/"==t.$route.path||"/home"==t.$route.path||t.$route.path=="/productDetails/"+t.$store.state.detailID?(console.log(t.$route.path),console.log("不跳")):(console.log("跳"),t.$router.push("/home")),t.reload(),t.loginDialogVisible=!1):(t.getCode(),t.$message.error(e.data.msg))})).catch((function(e){console.log(e)}))}));case 1:case"end":return r.stop()}}),r)})))()},registerForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(l["c"])(t.ruleForm2).then((function(e){200==e.data.code?(console.log(e,"成功"),t.registerDialogVisible=!1,t.$store.commit("setUser",e.data.token),t.userInfo(),t.reload(),t.$message({message:"註冊成功",type:"success"}),t.is=!1):(t.getCode(),t.$message.error(e.data.msg))})).catch((function(e){console.log(e,"接口錯誤")}))}))},getCode:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(l["d"])().then((function(t){e.imgCode="data:image/gif;base64,"+t.data.img,e.ruleForm.uuid=t.data.uuid,e.ruleForm2.uuid=t.data.uuid})).catch((function(e){console.log(e,"失敗")}));case 1:case"end":return t.stop()}}),t)})))()},userInfo:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])();case 2:r=t.sent,200===r.data.code?e.currentUser=r.data.user.userName:401===r.data.code&&(Object(d["b"])("toutiao-user"),e.isToken=!0);case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.$store.commit("shareIsDialog",!1)},closeRegister:function(){console.log("關閉"),this.$refs.ruleForm2.resetFields()},loginChange:function(){this.getCode(),this.loginDialogVisible=!1,this.registerDialogVisible=!0,this.$refs.ruleForm.resetFields()},registerChange:function(){this.getCode(),this.registerDialogVisible=!1,this.loginDialogVisible=!0,this.$refs.ruleForm2.resetFields()}}},h=f,g=(r("3ec5"),r("2877")),b=Object(g["a"])(h,s,n,!1,null,"365dfd7c",null),v=b.exports,k=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("footer",{staticClass:"footer"},[r("div",{staticClass:"f-box"},[r("div",{staticClass:"f-left"},[r("span",[e._v("任何疑問請聯系 "),r("i",{staticClass:"el-icon-s-promotion"}),e._v("@faka77777，備註 商城")])])])])}],w={data:function(){return{hollow:r("421e")}}},D=w,C=(r("fa12"),Object(g["a"])(D,k,y,!1,null,"60229a78",null)),x=C.exports,F={provide:function(){return{reload:this.reload}},created:function(){},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){var e=this;this.isRouterAlive=!1,this.$nextTick((function(){e.isRouterAlive=!0}))}},components:{HeadLogin:v,Footer:x}},O=F,$=(r("5c0b"),Object(g["a"])(O,a,i,!1,null,null,null)),_=$.exports,j=r("8c4f");r("e148"),r("bb51");o["default"].use(j["a"]);var P=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:function(e){return Promise.resolve().then(function(){var t=[r("bb51")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{path:"/productDetails/:id",name:"productDetails",component:function(e){return Promise.resolve().then(function(){var t=[r("e148")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{path:"/Personalcenter",name:"Personalcenter",component:function(e){return r.e("chunk-9780a9a0").then(function(){var t=[r("8c2e")];e.apply(null,t)}.bind(this)).catch(r.oe)},children:[{path:"/information",name:"information",component:function(e){return r.e("chunk-8b7264e2").then(function(){var t=[r("2afd")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{path:"/myOrder",name:"myOrder",component:function(e){return Promise.all([r.e("chunk-5ff2dffe"),r.e("chunk-4b5fcb3e")]).then(function(){var t=[r("12cd")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{path:"/recharge",name:"recharge",component:function(e){return Promise.all([r.e("chunk-5ff2dffe"),r.e("chunk-cbceeeb8")]).then(function(){var t=[r("211e")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{path:"/record",name:"record",component:function(e){return r.e("chunk-68a891dd").then(function(){var t=[r("bc34")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{path:"/stationNews",name:"stationNews",component:function(e){return r.e("chunk-73ebf44c").then(function(){var t=[r("768f")];e.apply(null,t)}.bind(this)).catch(r.oe)}}]},{path:"/loginToPay/:id",name:"loginToPay",component:function(e){return r.e("chunk-e5a003ec").then(function(){var t=[r("575d")];e.apply(null,t)}.bind(this)).catch(r.oe)}}],A=new j["a"]({mode:"history",base:"/",routes:P}),I=A,T=r("5c96"),R=r.n(T),q=(r("0fae"),r("c70b"));r("30dc");o["default"].prototype.$math=q,o["default"].config.productionTip=!1,o["default"].use(R.a),new o["default"]({router:I,store:u["a"],render:function(e){return e(_)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("517b")},"5d2d":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return s}));var o=r("53ca"),a=(r("e9c4"),function(e){var t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(r){return t}}),i=function(e,t){"object"===Object(o["a"])(t)&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},s=function(e){window.localStorage.removeItem(e)}},6:function(e,t){},7:function(e,t){},"72ac":function(e,t,r){"use strict";t["a"]={baseURL:"https://www.accspay.com/v1"}},"74cc":function(e,t,r){},7686:function(e,t,r){"use strict";r("dea8")},8:function(e,t){},9:function(e,t){},a127:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return l}));var o=r("b775"),a=r("4360"),i=function(e){return Object(o["a"])({method:"GET",url:"/api/mall/productOrder/".concat(e),headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},s=function(e){return Object(o["a"])({method:"GET",url:"/api/mall/productOrder/".concat(e,"/actions/onlinePayInfo"),headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},n=function(e){return Object(o["a"])({method:"GET",url:"/api/mall/productOrder/".concat(e,"/actions/onlinePayStatus"),headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},c=function(e){return Object(o["a"])({method:"POST",url:"/api/mall/productOrder/actions/pay",data:e,headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},l=function(e){return Object(o["a"])({method:"POST",url:"/api/mall/productOrder/actions/submit",data:e,headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})}},b329:function(e,t,r){},b5ff:function(e,t,r){e.exports=r.p+"static/img/zfb.1cf23d30.png"},b775:function(e,t,r){"use strict";r("d3b7");var o=r("bc3a"),a=r.n(o),i=r("72ac"),s=(r("4360"),r("5d2d"),a.a.create({baseURL:i["a"].baseURL,timeout:2e4}));s.interceptors.request.use((function(e){return e}),(function(e){return console.log(e,"錯誤"),Promise.reject(e)})),t["a"]=s},b988:function(e,t,r){e.exports=r.p+"static/img/packup.17c80a8c.png"},bb51:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main",attrs:{"element-loading-text":"拼命加載中"}},[r("div",{staticClass:"container"},[e._l(e.category,(function(t){return[void 0!==t.list&&t.list.length?r("div",{key:t.id,staticClass:"box"},[r("div",{staticClass:"th"},[r("div",{staticClass:"td1"},[e._v(e._s(t.name))]),r("div",{staticClass:"td2"},[e._v("單價")]),r("div",{staticClass:"td3"},[e._v("庫存")]),r("div",{staticClass:"td4"},[e._v("操作")])]),r("div",[e._l(t.list,(function(t,o){return r("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen||o<e.max,expression:"isOpen || index < max"}],key:t.id,staticClass:"tr"},[r("div",{staticClass:"td1"},[r("div",{staticClass:"tImg"},[r("img",{attrs:{src:e.baseURL+t.coverUrl,alt:""}})]),r("a",{attrs:{href:""},on:{click:function(r){return r.preventDefault(),e.insurance(t.id)}}},[e._v(e._s(t.translateName||t.sourceName))])]),r("div",{staticClass:"td2"},[e._v("$"+e._s(t.price))]),r("div",{staticClass:"td3"},[e._v(e._s(t.stock)+"件")]),r("div",{staticClass:"td4"},[r("div",{on:{click:function(r){e.getProductNumber(t.id,t.price,t.translateName||t.sourceName,t.stock)}}},[e._v("立即購買")])])])})),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isOpen&&t.list.length>e.max,expression:"!isOpen && items.list.length > max"}],staticClass:"isOpen",on:{click:function(t){e.isOpen=!e.isOpen}}},[r("img",{attrs:{src:e.unfold,alt:""}}),e._v("展開全部 ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen&&t.list.length>e.max,expression:"isOpen && items.list.length > max"}],staticClass:"isOpen",on:{click:function(t){e.isOpen=!e.isOpen}}},[r("img",{attrs:{src:e.packup,alt:""}}),e._v("收起 ")])],2)]):e._e()]})),r("el-dialog",{attrs:{title:"購買",visible:e.commodityDialog,width:"360px",size:"small","close-on-click-modal":!1,"custom-class":"dialogForm"},on:{"update:visible":function(t){e.commodityDialog=t}}},[r("h4",{staticClass:"title"},[e._v(" "+e._s(e.describe)+" ")]),r("el-divider"),r("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"數量"}},[r("el-input-number",{attrs:{size:"small",min:1,"controls-position":"right"},on:{blur:e.abc,change:e.handleChange},model:{value:e.form.quantity,callback:function(t){e.$set(e.form,"quantity",t)},expression:"form.quantity"}})],1),r("el-form-item",{attrs:{label:"價錢"}},[r("span",{style:{color:"#f66f45"}},[e._v("$"+e._s(e.price))])]),r("el-form-item",{attrs:{prop:"checked"}},[r("el-checkbox-group",{model:{value:e.form.checked,callback:function(t){e.$set(e.form,"checked",t)},expression:"form.checked"}},[r("el-checkbox",{attrs:{name:"type"}},[e._v("我同意公開報價和使用條款")])],1)],1),r("el-form-item",[r("el-button",{style:{marginLeft:"240px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交訂單")])],1)],1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.stepDialog,width:"455px","close-on-click-modal":!1},on:{"update:visible":function(t){e.stepDialog=t},close:e.closeQrCode}},[r("el-steps",{attrs:{active:e.active,"finish-status":"success",simple:""}},[r("el-step",{attrs:{title:"完成 1"}}),r("el-step",{attrs:{title:"完成 2"}}),r("el-step",{attrs:{title:"完成 3"}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}]},[r("el-divider"),r("el-form",{ref:"productDetailsForm",staticClass:"demo-ruleForm",attrs:{model:e.productDetailsForm,rules:e.productDetailsRules}},[r("span",{staticClass:"productTitle"},[e._v(" "+e._s(e.homeProductDetails.translateName)+" ")]),r("el-form-item",{attrs:{label:"數量"}},[r("el-input-number",{attrs:{min:1,"controls-position":"right"},on:{change:e.productDetailsChange},model:{value:e.productDetailsForm.quantity,callback:function(t){e.$set(e.productDetailsForm,"quantity",t)},expression:"productDetailsForm.quantity"}})],1),r("el-form-item",{attrs:{label:"價錢"}},[r("span",{style:{color:"#f66f45"}},[e._v("$"+e._s(e.homeProductDetails.price))])]),r("el-form-item",{attrs:{prop:"checked"}},[r("el-checkbox-group",{model:{value:e.productDetailsForm.checked,callback:function(t){e.$set(e.productDetailsForm,"checked",t)},expression:"productDetailsForm.checked"}},[r("el-checkbox",{attrs:{name:"type"}},[e._v("我同意公開報價和使用條款")])],1)],1),r("el-form-item",[r("el-button",{style:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.productDetailsNext("productDetailsForm")}}},[e._v("下一步")])],1)],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active == 2"}]},[r("el-divider"),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"hide-required-asterisk":!0,"status-icon":"",rules:e.rules2}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"請輸入郵箱","prefix-icon":"el-icon-user"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",autocomplete:"off",placeholder:"請輸入密碼"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("div",{staticClass:"codeImg"},[r("el-input",{style:{width:"66%"},attrs:{placeholder:"請輸入驗證碼"},model:{value:e.ruleForm2.code,callback:function(t){e.$set(e.ruleForm2,"code",t)},expression:"ruleForm2.code"}}),r("img",{staticClass:"imgC",attrs:{src:e.imgCode,alt:""},on:{click:e.getCode}})],1)]),r("el-form-item",[r("el-button",{style:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.registerForm("ruleForm2")}}},[e._v("下一步")])],1)],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:3==e.active,expression:"active == 3"}],staticClass:"abc"},[r("el-divider"),r("div",{staticClass:"titleImg"},[r("img",{attrs:{src:e.zfbImg,alt:""}}),e._v("支付寶掃一掃支付"),r("span",{style:{color:"#f66f45"}},[e._v(e._s(e.paymentAmount))]),e._v("人民幣 ")]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.stepLoading,expression:"stepLoading"}],ref:"payQr",attrs:{id:"qrcodeDom"}})],1)],1)],2)])},a=[],i=r("1da1"),s=r("5530"),n=(r("b680"),r("96cf"),r("c1fb")),c=r("72ac"),l=r("a127"),u=r("4360"),d=r("5d2d"),m=r("2f62"),p=r("d044"),f=r.n(p),h=r("c24f"),g={username:[{required:!0,message:"請輸入郵箱",trigger:"blur"},{type:"email",message:"請輸入正確的郵箱",trigger:["blur","change"]}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}],code:[{required:!0,message:"請輸入驗證碼",trigger:"blur"}]},b={name:"Home",created:function(){this.getClassificationList()},mounted:function(){},data:function(){return{active:1,stepDialog:!1,zfbImg:r("b5ff"),loading:!0,unfold:r("4d5f"),packup:r("b988"),commodityDialog:!1,qRCodeDialog:!1,baseURL:c["a"].baseURL,max:10,isOpen:!1,category:[],price:"",originalPrice:"",describe:"",clearTimer:null,form:{productId:"",quantity:1,checked:[]},rules:{checked:[{type:"array",required:!0,message:"請勾選",trigger:"change"}]},productDetailsRules:{checked:[{type:"array",required:!0,message:"請勾選",trigger:"change"}]},obj:{},paymentAmount:"",homeProductDetails:"",productDetailsForm:{productId:"",quantity:1,checked:[]},productDetailsPrice:"",ruleForm2:{username:"",password:"",code:"",uuid:""},orderID:"",imgCode:"",rules2:g,stepLoading:!0}},inject:["reload"],components:{QRCode:f.a},methods:Object(s["a"])(Object(s["a"])({insurance:function(e){this.$store.commit("detailID",{id:e}),this.$router.push({path:"/productDetails/".concat(e)})},getClassificationList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.time(),Object(n["b"])().then((function(t){e.category=t.data.rows;var r=function(t){e.category.hasOwnProperty(t)&&Object(n["i"])({categoryId:e.category[t].id}).then((function(r){e.$set(e.category[t],"list",r.data.rows),e.loading=!1}))};for(var o in e.category)r(o)})),console.timeEnd();case 3:case"end":return t.stop()}}),t)})))()},getProductNumber:function(e,t,r,o){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(console.log(o),u["a"].state.user){i.next=15;break}if(0!==o){i.next=6;break}return a.$message.error("商品庫存不足"),console.log("庫存不足"),i.abrupt("return");case 6:return a.productDetailsForm.productId=e,a.stepDialog=!0,i.next=10,Object(n["f"])(e);case 10:return s=i.sent,a.homeProductDetails=s.data.data,a.productDetailsPrice=a.homeProductDetails.price,console.log(a.homeProductDetails,"商品詳細"),i.abrupt("return");case 15:a.commodityDialog=!0,a.form.productId=e,a.price=t,a.originalPrice=t,a.price=a.form.quantity*a.originalPrice,a.describe=r;case 21:case"end":return i.stop()}}),i)})))()}},Object(m["b"])(["shareIsDialog"])),{},{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object.assign(t.obj,{id:t.form.productId,price:t.originalPrice,quantity:t.form.quantity,describe:t.describe}),t.$store.commit("product",t.obj),Object(n["d"])(t.form).then((function(e){if(console.log(e,"新增訂單"),200===e.data.code)t.$message({showClose:!0,message:e.data.msg+"，可以到我的訂單裏查看信息",type:"success",duration:5e3}),console.log(e.data.id,"訂單"),t.commodityDialog=!1,t.getClassificationList();else if(500===e.data.code)t.$message({showClose:!0,message:e.data.msg,type:"error"});else{if(401===e.data.code)return Object(d["b"])("toutiao-user"),void t.$store.commit("shareIsDialog",!0);601===e.data.code&&(t.commodityDialog=!1,t.$message({showClose:!0,message:e.data.msg+"，請先充值",type:"error"}),t.$router.push({name:"recharge"}))}}))}))},resetForm:function(e){this.$refs[e].resetFields()},handleChange:function(e,t){e>=t?this.price=this.$math.add(this.price,this.originalPrice).toFixed(2):t>=e?this.price=this.$math.subtract(this.price,this.originalPrice).toFixed(2):console.log("abc")},abc:function(){console.log("aaa"),this.price=(this.form.quantity*this.originalPrice).toFixed(2)},closeQrCode:function(){this.$refs.ruleForm2.resetFields(),this.clearTimer=null,this.$refs.payQr.innerText="",this.active=1,this.paymentAmount="",this.stepLoading=!0},getCheckOnlinePaymentStatus:function(){var e=this;this.stepDialog&&(this.clearTimer=setTimeout((function(){Object(l["a"])(e.orderID).then((function(t){console.log(t,"訂單支付狀態"),1==t.data?(console.log("成功",t.data),e.stepDialog=!1,e.$message({message:"支付成功",type:"success"}),e.clearTimer=null,e.getClassificationList(),e.$router.push({name:"myOrder"})):0==t.data&&(console.log("失敗",t.data),e.getCheckOnlinePaymentStatus())}))}),1e3))},productDetailsChange:function(e,t){e>=t?(this.homeProductDetails.price=this.$math.add(this.homeProductDetails.price,this.productDetailsPrice).toFixed(2),console.log(this.homeProductDetails.price,"價錢")):t>=e?this.homeProductDetails.price=this.$math.subtract(this.homeProductDetails.price,this.productDetailsPrice).toFixed(2):console.log("abc")},productDetailsNext:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.active++,t.getCode(),console.log("submit!")}))},registerForm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log("submit!"),Object(h["c"])(t.ruleForm2).then((function(e){console.log(e,"res"),200===e.data.code?(t.$store.commit("setUser",e.data.token),t.reload(),Object(l["e"])(t.productDetailsForm).then((function(e){console.log(e,"提交訂單"),t.active++,t.orderID=e.data.id,Object(l["c"])(t.orderID).then((function(e){console.log(e),t.paymentAmount=e.data.data.paymentAmount,console.log(e.data.data.url),t.$nextTick((function(){new f.a("qrcodeDom",{width:260,height:260,text:e.data.data.url,render:"canvas",background:"#f0f",foreground:"#ff0"})})),t.stepLoading=!1,t.getCheckOnlinePaymentStatus()}))}))):500===e.data.code&&(t.getCode(),t.$message.error(e.data.msg))}))}));case 1:case"end":return r.stop()}}),r)})))()},next:function(){this.active++>2&&(this.active=3)},getCode:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(h["d"])().then((function(t){e.imgCode="data:image/gif;base64,"+t.data.img,e.ruleForm2.uuid=t.data.uuid})).catch((function(e){console.log(e,"失敗")}));case 1:case"end":return t.stop()}}),t)})))()}})},v=b,k=(r("06b0"),r("2877")),y=Object(k["a"])(v,o,a,!1,null,"4354d8ee",null);t["default"]=y.exports},bf6f:function(e,t,r){e.exports=r.p+"static/img/logo.a029d073.png"},c1fb:function(e,t,r){"use strict";r.d(t,"i",(function(){return i})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"e",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return p}));var o=r("b775"),a=r("4360"),i=function(e){return Object(o["a"])({method:"GET",url:"/api/mall/product/list/",params:e})},s=function(e){return Object(o["a"])({method:"GET",url:"/api/mall/product/".concat(e)})},n=function(){return Object(o["a"])({method:"GET",url:"/api/mall/productCategory/list"})},c=function(e){return Object(o["a"])({method:"POST",url:"/api/mall/productOrder",data:e,headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},l=function(e){return Object(o["a"])({method:"GET",url:"/api/mall/productOrder/list",params:e,headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},u=function(e){return Object(o["a"])({method:"GET",url:"/system/dict/data/type/mall_product_order_status",headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},d=function(e){return Object(o["a"])({method:"GET",url:"/api/mall/productOrder/"+e,headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},m=function(e){return Object(o["a"])({method:"POST",url:"/api/mall/productOrder/".concat(e,"/actions/notifyDeliver"),headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})},p=function(e){return Object(o["a"])({method:"PUT",url:"/api/mall/productOrder/applyRefund",data:e,headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})}},c24f:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return c}));var o=r("b775"),a=r("4360"),i=function(e){return Object(o["a"])({method:"POST",url:"/login",data:e})},s=function(e){return Object(o["a"])({method:"POST",url:"/register",data:e})},n=function(){return Object(o["a"])({method:"GET",url:"/captchaImage"})},c=function(){return Object(o["a"])({method:"GET",url:"/getInfo",headers:{Authorization:"Bearer ".concat(a["a"].state.user)}})}},dea8:function(e,t,r){},e148:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:{background:"#e9eef3"}},[r("div",{staticClass:"product"},[r("div",{staticClass:"magazines-left"},[r("div",{staticClass:"img btn"},[e.obj.coverUrl?r("img",{attrs:{src:e.baseURL+e.obj.coverUrl,alt:""}}):e._e()]),r("div",{staticClass:"btn"},[r("div",{staticClass:"text"},[e._v("有現貨")]),r("span",[e._v(e._s(e.obj.stock)+"件")])]),r("div",{staticClass:"btn"},[r("div",{staticClass:"text"},[e._v("每個的價格")]),r("span",[e._v(e._s(e.obj.price)+"$")])]),r("div",{staticClass:"abc",on:{click:e.getProductNumber}},[r("span",[e._v("購買")])])]),r("div",{staticClass:"magazines-right"},[r("h2",[e._v("描述")]),r("ul",[r("li",{domProps:{innerHTML:e._s(e.obj.translateRemark)}})])]),r("el-dialog",{attrs:{title:"購買",visible:e.commodityDialog,width:"360px",size:"small","close-on-click-modal":!1,"custom-class":"dialogForm"},on:{"update:visible":function(t){e.commodityDialog=t}}},[r("h4",{staticClass:"title"},[e._v(" "+e._s(e.obj.translateName)+" ")]),r("el-divider"),r("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"數量"}},[r("el-input-number",{attrs:{size:"small",min:1,"controls-position":"right"},on:{blur:e.abc,change:e.handleChange},model:{value:e.form.quantity,callback:function(t){e.$set(e.form,"quantity",t)},expression:"form.quantity"}})],1),r("el-form-item",{attrs:{label:"價錢"}},[r("span",{style:{color:"#f66f45"}},[e._v("$"+e._s(e.price))])]),r("el-form-item",{attrs:{prop:"checked"}},[r("el-checkbox-group",{model:{value:e.form.checked,callback:function(t){e.$set(e.form,"checked",t)},expression:"form.checked"}},[r("el-checkbox",{attrs:{name:"type"}},[e._v("我同意公開報價和使用條款")])],1)],1),r("el-form-item",[r("el-button",{style:{marginLeft:"240px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交訂單")])],1)],1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.stepDialog,width:"455px","close-on-click-modal":!1},on:{"update:visible":function(t){e.stepDialog=t},close:e.closeQrCode}},[r("el-steps",{attrs:{active:e.active,"finish-status":"success",simple:""}},[r("el-step",{attrs:{title:"完成 1"}}),r("el-step",{attrs:{title:"完成 2"}}),r("el-step",{attrs:{title:"完成 3"}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}]},[r("el-divider"),r("el-form",{ref:"productDetailsForm",staticClass:"demo-ruleForm",attrs:{model:e.productDetailsForm,rules:e.productDetailsRules}},[r("h4",{staticClass:"productTitle"},[e._v(" "+e._s(e.homeProductDetails.translateName)+" ")]),r("el-form-item",{attrs:{label:"數量"}},[r("el-input-number",{attrs:{min:1,"controls-position":"right"},on:{change:e.productDetailsChange},model:{value:e.productDetailsForm.quantity,callback:function(t){e.$set(e.productDetailsForm,"quantity",t)},expression:"productDetailsForm.quantity"}})],1),r("el-form-item",{attrs:{label:"價錢"}},[r("span",{style:{color:"#f66f45"}},[e._v("$"+e._s(e.homeProductDetails.price))])]),r("el-form-item",{attrs:{prop:"checked"}},[r("el-checkbox-group",{model:{value:e.productDetailsForm.checked,callback:function(t){e.$set(e.productDetailsForm,"checked",t)},expression:"productDetailsForm.checked"}},[r("el-checkbox",{attrs:{name:"type"}},[e._v("我同意公開報價和使用條款")])],1)],1),r("el-form-item",[r("el-button",{style:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.productDetailsNext("productDetailsForm")}}},[e._v("下一步")])],1)],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active == 2"}]},[r("el-divider"),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"hide-required-asterisk":!0,"status-icon":"",rules:e.rules2}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"請輸入郵箱","prefix-icon":"el-icon-user"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",autocomplete:"off",placeholder:"請輸入密碼"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("div",{staticClass:"codeImg"},[r("el-input",{style:{width:"66%"},attrs:{placeholder:"請輸入驗證碼"},model:{value:e.ruleForm2.code,callback:function(t){e.$set(e.ruleForm2,"code",t)},expression:"ruleForm2.code"}}),r("img",{staticClass:"imgC",attrs:{src:e.imgCode,alt:""},on:{click:e.getCode}})],1)]),r("el-form-item",[r("div",{staticClass:"nextBtn"},[r("el-button",{style:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.registerForm("ruleForm2")}}},[e._v("下一步")])],1)])],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:3==e.active,expression:"active == 3"}],staticClass:"abc"},[r("el-divider"),r("div",{staticClass:"titleImg"},[r("img",{attrs:{src:e.zfbImg,alt:""}}),e._v("支付寶掃一掃支付"),r("span",{style:{color:"#f66f45"}},[e._v(e._s(e.paymentAmount))]),e._v("人民幣 ")]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.stepLoading,expression:"stepLoading"}],ref:"payQr",attrs:{id:"qrcodeDom"}})],1)],1)],1)])},a=[],i=r("1da1"),s=(r("b680"),r("96cf"),r("c1fb")),n=r("72ac"),c=r("5d2d"),l=r("a127"),u=r("d044"),d=r.n(u),m=r("c24f"),p=r("4360"),f={username:[{required:!0,message:"請輸入郵箱",trigger:"blur"},{type:"email",message:"請輸入正確的郵箱",trigger:["blur","change"]}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}],code:[{required:!0,message:"請輸入驗證碼",trigger:"blur"}]},h={name:"ProductDetails",created:function(){this.getProduct()},data:function(){return{zfbImg:r("b5ff"),qRCodeDialog:!1,paymentAmount:"",baseURL:n["a"].baseURL,productID:this.$route.params.id,clearTimer:null,obj:{},commodityDialog:!1,price:"",originalPrice:"",describe:"",form:{productId:"",quantity:1,checked:[]},rules:{checked:[{type:"array",required:!0,message:"請勾選",trigger:"change"}]},productDetailsRules:{checked:[{type:"array",required:!0,message:"請勾選",trigger:"change"}]},homeProductDetails:"",productDetailsPrice:"",active:1,stepDialog:!1,productDetailsForm:{productId:this.$route.params.id,quantity:1,checked:[]},ruleForm2:{username:"",password:"",code:"",uuid:""},orderID:"",imgCode:"",rules2:f,stepLoading:!0}},inject:["reload"],components:{QRCode:d.a},methods:{getProduct:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["f"])(e.productID);case 2:r=t.sent,e.obj=r.data.data,e.homeProductDetails=r.data.data;case 5:case"end":return t.stop()}}),t)})))()},getProductNumber:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(p["a"].state.user){t.next=8;break}if(0!==e.obj.stock){t.next=5;break}return e.$message.error("商品庫存不足"),console.log("庫存不足"),t.abrupt("return");case 5:return e.stepDialog=!0,e.productDetailsPrice=e.homeProductDetails.price,t.abrupt("return");case 8:e.commodityDialog=!0,e.form.productId=e.obj.id,e.price=e.obj.price,e.originalPrice=e.obj.price,e.price=e.form.quantity*e.originalPrice,e.describe=e.obj.describe;case 14:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$store.commit("detailID",{productID:this.productID}),this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log("submit!"),Object(s["d"])(t.form).then((function(e){if(200===e.data.code)t.$message({showClose:!0,message:e.data.msg+"，可以到我的訂單裏查看信息",type:"success",duration:5e3}),t.commodityDialog=!1,t.getProduct();else if(500===e.data.code)t.$message({showClose:!0,message:e.data.msg,type:"error"});else{if(401===e.data.code)return Object(c["b"])("toutiao-user"),void t.$store.commit("shareIsDialog",!0);601===e.data.code&&(t.commodityDialog=!1,t.$message({showClose:!0,message:e.data.msg+"，請先充值",type:"error"}),t.$router.push({name:"recharge"}))}}))}))},handleChange:function(e,t){e>=t?this.price=this.$math.add(this.price,this.originalPrice).toFixed(2):t>=e?this.price=this.$math.subtract(this.price,this.originalPrice).toFixed(2):console.log("abc")},abc:function(){console.log("aaa"),this.price=(this.form.quantity*this.originalPrice).toFixed(2)},closeQrCode:function(){this.$refs.ruleForm2.resetFields(),this.clearTimer=null,this.$refs.payQr.innerText="",this.active=1,this.paymentAmount="",this.stepLoading=!0},getCheckOnlinePaymentStatus:function(){var e=this;this.stepDialog&&(this.clearTimer=setTimeout((function(){Object(l["a"])(e.orderID).then((function(t){console.log(t,"訂單支付狀態"),1==t.data?(console.log("成功",t.data),e.stepDialog=!1,e.$message({message:"支付成功",type:"success"}),e.clearTimer=null,e.$router.push({name:"myOrder"})):0==t.data&&(console.log("失敗",t.data),e.getCheckOnlinePaymentStatus())}))}),1e3))},productDetailsChange:function(e,t){e>=t?(this.homeProductDetails.price=this.$math.add(this.homeProductDetails.price,this.productDetailsPrice).toFixed(2),console.log(this.homeProductDetails.price,"價錢")):t>=e?this.homeProductDetails.price=this.$math.subtract(this.homeProductDetails.price,this.productDetailsPrice).toFixed(2):console.log("abc")},productDetailsNext:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.active++,t.getCode(),console.log("submit!")}))},registerForm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log("submit!"),Object(m["c"])(t.ruleForm2).then((function(e){console.log(e,"res"),200===e.data.code?(t.$store.commit("setUser",e.data.token),t.reload(),Object(l["e"])(t.productDetailsForm).then((function(e){console.log(e,"提交訂單"),t.active++,t.orderID=e.data.id,Object(l["c"])(t.orderID).then((function(e){console.log(e),t.paymentAmount=e.data.data.paymentAmount,console.log(e.data.data.url),t.$nextTick((function(){new d.a("qrcodeDom",{width:260,height:260,text:e.data.data.url,render:"canvas",background:"#f0f",foreground:"#ff0"})})),t.stepLoading=!1,t.getCheckOnlinePaymentStatus()}))}))):500===e.data.code&&(t.getCode(),t.$message.error(e.data.msg))}))}));case 1:case"end":return r.stop()}}),r)})))()},getCode:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(m["d"])().then((function(t){e.imgCode="data:image/gif;base64,"+t.data.img,e.ruleForm2.uuid=t.data.uuid})).catch((function(e){console.log(e,"失敗")}));case 1:case"end":return t.stop()}}),t)})))()}}},g=h,b=(r("7686"),r("2877")),v=Object(b["a"])(g,o,a,!1,null,"986170f4",null);t["default"]=v.exports},fa12:function(e,t,r){"use strict";r("74cc")}});