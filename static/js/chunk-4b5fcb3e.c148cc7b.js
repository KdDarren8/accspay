(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b5fcb3e"],{"0d44":function(e,t,a){"use strict";a("5727")},"12cd":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myOrder"},[a("h3",{staticClass:"component-title"},[e._v("我的訂單")]),a("div",{staticClass:"order-container"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,"hide-required-asterisk":!0,model:e.formInline,size:"medium",rules:e.rules}},[a("el-form-item",{attrs:{label:"訂單號",prop:"code"}},[a("el-input",{style:{width:"300px"},attrs:{placeholder:"請選擇訂單號"},model:{value:e.formInline.code,callback:function(t){e.$set(e.formInline,"code",t)},expression:"formInline.code"}})],1),a("el-form-item",{attrs:{label:"訂單狀態",prop:"status"}},[a("el-select",{style:{width:"300px"},attrs:{placeholder:"請選擇訂單狀態"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[e._l(e.OrderStatus,(function(e){return[a("el-option",{key:e.id,attrs:{label:e.dictLabel,value:e.dictValue}})]}))],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.inquire("formInline")}}},[e._v("搜索")]),a("el-button",{on:{click:function(t){return e.reset("formInline")}}},[e._v("重置")])],1)],1),a("el-divider")],1),a("div",{staticClass:"tableContainer"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{stripe:!0,data:e.tableDataOrderList,align:"center","header-cell-style":e.headStyle,"cell-style":{textAlign:"center"},"element-loading-text":"加載中..."}},[a("el-table-column",{attrs:{prop:"code",label:"訂單號",width:"180",sortable:"","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"productSourceName",label:"商品名稱",width:"160","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"totalPrice",label:"商品單價",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("$"+e._s(t.row.totalPrice))])]}}])}),a("el-table-column",{attrs:{prop:"paymentTime",label:"支付時間",width:"180"}}),a("el-table-column",{attrs:{prop:"finishTime",label:"完成時間",width:"180"}}),a("el-table-column",{attrs:{prop:"status",label:"狀態",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.OrderStatus,(function(r){return[a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.status==r.dictValue,expression:"scope.row.status == item.dictValue"}],key:r.id},[e._v(e._s(r.dictLabel))])]}))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{style:{color:"#F66F45"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row,t.$index)}}},[a("el-image",{staticStyle:{width:"18px",height:"10px",verticalAlign:"middle"},attrs:{src:e.checkIcon}}),a("span",{style:{marginLeft:"4px",verticalAlign:"middle"}},[e._v("查看")])],1),a("span",{style:e.applicationReminderStyle,on:{click:function(a){return e.request(t.row,t.$index)}}},[e._v(" 申請退款 ")]),a("span",{style:e.applicationReminderStyle,on:{click:function(a){return e.remindShipment(t.row,t.$index)}}},[e._v("提醒發貨")])]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"paginationClass"},[a("el-pagination",{ref:"pagination",attrs:{background:"",layout:"prev, pager, next, jumper, slot","prev-text":"上一頁","next-text":"下一頁",total:e.total,align:"center","page-size":e.pageSize},on:{"current-change":e.currentChange}},[a("el-button",{attrs:{size:"small"},on:{click:e.goPage}},[e._v("確定")])],1)],1)],1),a("el-dialog",{attrs:{title:"",visible:e.tableVisible,width:"50%"},on:{"update:visible":function(t){e.tableVisible=t}}},[a("el-descriptions",{attrs:{direction:"vertical",column:1,border:""}},[a("el-descriptions-item",{attrs:{label:"訂單號"}},[e._v(e._s(e.form.code))]),a("el-descriptions-item",{attrs:{label:"產品名稱"}},[e._v(e._s(e.form.productTranslateName))])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.inventoryList,border:"",align:"center"}},[a("el-table-column",{attrs:{prop:"account",label:"賬號"}}),a("el-table-column",{attrs:{prop:"password",label:"密碼"}}),a("el-table-column",{attrs:{prop:"attachment",label:"附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.attachment?a("a",{attrs:{href:e.baseURL+t.row.attachment+"?id=order-"+e.form.code,download:"附件.txt"}},[e._v("點擊下載")]):e._e()]}}])})],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.applicationDialog,width:"400px"},on:{"update:visible":function(t){e.applicationDialog=t},close:e.resetRefundForm}},[a("el-form",{ref:"refundForm",attrs:{"label-width":"80px",model:e.refundForm,size:"medium"}},[a("el-form-item",{attrs:{label:"上傳憑證",prop:"auditCertificate",rules:[{required:!0,message:"憑證不能為空"}]}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.baseRefundURL,"show-file-list":!1,headers:e.headers,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.refundForm.auditCertificate?a("img",{staticClass:"avatar",attrs:{src:e.refundForm.auditCertificate}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"備註",prop:"remark"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"請輸入備註"},model:{value:e.refundForm.remark,callback:function(t){e.$set(e.refundForm,"remark",t)},expression:"refundForm.remark"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitRefundForm("refundForm")}}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.resetRefundForm("refundForm")}}},[e._v("重置")])],1)],1)],1)],1)},i=[],n=a("1da1"),o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("96cf"),a("c1fb")),s=a("72ac"),l=a("4360"),c={created:function(){this.getCheckMyOrderList(),this.getOrderStatus()},data:function(){return{applicationReminderStyle:{color:"#F66F45",verticalAlign:"middle",fontSize:"12px",cursor:"pointer"},baseURL:s["a"].baseURL,loading:!0,isShow:!1,tableVisible:!1,applicationDialog:!1,headStyle:{textAlign:"center",background:"#F66F45",color:"#fff",fontWeight:"bold"},check:{},formInline:{code:"",status:""},rules:{code:[{required:!0,message:"請輸入訂單名稱",trigger:"blur"}],status:[{required:!0,message:"請選擇訂單狀態",trigger:"blur"}]},total:null,pageSize:7,currentPage:1,tableDataOrderList:[],checkIcon:a("2aeb"),OrderStatus:[],form:{inventoryList:[]},refundForm:{recordId:"",auditCertificate:"",remark:""},baseRefundURL:s["a"].baseURL+"/common/upload",headers:{Authorization:"Bearer ".concat(l["a"].state.user)}}},methods:{getCheckMyOrderList:function(){var e=this;Object(o["a"])({pageNum:this.currentPage,pageSize:this.pageSize}).then((function(t){console.log(t.data.rows,"訂單列表"),e.total=t.data.total,e.tableDataOrderList=t.data.rows,e.loading=!1,e.isShow=!0}))},currentChange:function(e){this.currentPage=e,this.getCheckMyOrderList()},goPage:function(){var e=this;this.$nextTick((function(){console.log(e.$refs.pagination.internalCurrentPage),e.currentPage=e.$refs.pagination.internalCurrentPage}))},inquire:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$nextTick((function(){t.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(o["a"])(t.formInline).then((function(e){t.currentPage=1,t.tableDataOrderList=e.data.rows,t.total=e.data.total}))}))}));case 1:case"end":return a.stop()}}),a)})))()},getOrderStatus:function(){var e=this;Object(o["e"])().then((function(t){e.OrderStatus=t.data.data}))},handleClick:function(e,t){var a=this;this.tableVisible=!0,Object.assign(this.check,e),Object(o["c"])(e.id).then((function(e){a.form=e.data.data}))},request:function(e,t){this.applicationDialog=!0,this.refundForm.recordId=e.id},remindShipment:function(e,t){var a=this;Object(o["g"])(e.id).then((function(e){console.log(e.data.code),200==e.data.code?a.$message({showClose:!0,message:e.data.msg,type:"success"}):500==e.data.code&&a.$message({showClose:!0,message:e.data.msg,type:"error"})}))},reset:function(e){var t=this;this.$nextTick((function(){t.$refs[e].resetFields(),t.getCheckMyOrderList()}))},downloadEvt:function(e){window.location.href=this.baseURL+e+"?id=附件"},handleAvatarSuccess:function(e,t){this.refundForm.auditCertificate=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/jpeg",a=e.size/1024/1024<2;return t||this.$message.error("上傳頭像圖片只能是 JPG或PNG 格式!"),a||this.$message.error("上傳頭像圖片大小不能超過 2MB!"),t&&a},submitRefundForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.applicationDialog=!1,Object(o["h"])(t.refundForm).then((function(e){200==e.data.code?(t.getCheckMyOrderList(),t.$message({message:e.data.msg,type:"success"})):500==e.data.code&&t.$message({message:e.data.msg,type:"warning"})}))}))},resetRefundForm:function(){this.$refs.refundForm.resetFields()}}},d=c,u=(a("a2da"),a("0d44"),a("2877")),m=Object(u["a"])(d,r,i,!1,null,"3c237976",null);t["default"]=m.exports},"2aeb":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAASCAMAAACQGyXoAAAAAXNSR0IArs4c6QAAAVNQTFRFAAAA/1VV/0BA/2Yz/39V/21J6HRG/2tD/3NA8209/21J82hG9G9D/29D9nFC/3JG93BI93BD+G1C+G5F+HJD83BE+XBE821D+W5G+m9D9m1C+nFH+m1E9m5E929G+29G925H93BG9nBE929F925G93FG+HBG+G9G9m5G+HBG9m9F93BG929F93BE929G929F9XBE929F+HBF9m5G9m9F+G9F9m9G9m9F9m9G929G929F929F9m5F9m9E9nBG9m9F929G93BF9m9F929F93BG929F93BF9m5F929F9m9F929F929E9m9F9m5F929F929F9m9F929F9m9F9m9F929F9m5E929E9m9F9m9E9m9F9m9F9m9F9W5F9m5F9m9F9m5F9nBF929F9m9E929F9m9F929F929F9m9E9m5F9m9E929F9m9F9m5F9m9F929F9m9F9m9FnNbXgQAAAHB0Uk5TAAMEBQYHCxMUFRUWFxcbHSAiIyUmKSkqLDU2Njg8Pj5BQlJcX19pam1td3l6e3x+gIiJi4yMj5OVmqeqq6+wsbe5vLzCyMvS09fX2Nve3t/j4+Xm5ufn6evr7O3u7u7w8PHy8/T09fb3+vr7/Pz8/SjgABkAAAElSURBVCjPZZFZO0JhFIVXlCGZp0yRuTIVQobIPGaKREhkKHr//5WLcw7Fvlr7e59n7/2tJZll6wmsH2e/nuOxGY9d5VUdOAMym5HYI3AbbCxhlf4X4HzEIck+dAp8zFZZsG0XYMdltrXbAPFuo/OmAc7rpc5gJNghOU8BcoOS1P8GwLA0mgfyo9IQAO9eqe4agJRNfUUAin2y3QBw16BFAFiR1gzFmrRsqCUlDTEvXZr0UpozVMqiYSlh0oQUNlTSmrwqRU0a/VmyYF2VsctjXuWRIwPARY3kMX40JvkKQMEnjQOQ6/p1I9UkuUORkFtqSQPcD5Q6edhsOtl6BLDXXp7Cg98pyTXxBLxOVv5LsLC/dfAJXE07/yRspp892ZjqrbAevwHZPXp4KVdEswAAAABJRU5ErkJggg=="},5727:function(e,t,a){},6712:function(e,t,a){},a2da:function(e,t,a){"use strict";a("6712")}}]);