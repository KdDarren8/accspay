(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09768c1e"],{"159b":function(t,e,i){var o=i("da84"),r=i("fdbc"),s=i("785a"),n=i("17c2"),a=i("9112"),c=function(t){if(t&&t.forEach!==n)try{a(t,"forEach",n)}catch(e){t.forEach=n}};for(var l in r)r[l]&&c(o[l]&&o[l].prototype);c(s)},"17c2":function(t,e,i){"use strict";var o=i("b727").forEach,r=i("a640"),s=r("forEach");t.exports=s?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,i){var o=i("d039"),r=i("b622"),s=i("2d00"),n=r("species");t.exports=function(t){return s>=51||!o((function(){var e=[],i=e.constructor={};return i[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"42a73":function(t,e,i){},"4d5f":function(t,e,i){t.exports=i.p+"img/unfold.ead4d0e8.png"},"4de4":function(t,e,i){"use strict";var o=i("23e7"),r=i("b727").filter,s=i("1dde"),n=s("filter");o({target:"Array",proto:!0,forced:!n},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"955c":function(t,e,i){"use strict";i("42a73")},a640:function(t,e,i){"use strict";var o=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&o((function(){i.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,i){var o=i("23e7"),r=i("7b0b"),s=i("df75"),n=i("d039"),a=n((function(){s(1)}));o({target:"Object",stat:!0,forced:a},{keys:function(t){return s(r(t))}})},b988:function(t,e,i){t.exports=i.p+"img/packup.17c80a8c.png"},bb51:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"main"},[i("div",{staticClass:"container"},[t._l(t.category,(function(e){return[void 0!==e.list&&e.list.length?i("div",{key:e.id,staticClass:"box"},[i("div",{staticClass:"th"},[i("div",{staticClass:"td1"},[t._v(t._s(e.name))]),i("div",{staticClass:"td2"},[t._v("單價")]),i("div",{staticClass:"td3"},[t._v("庫存")]),i("div",{staticClass:"td4"},[t._v("操作")])]),i("div",[t._l(e.list,(function(e,o){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen||o<t.max,expression:"isOpen || index < max"}],key:e.id,staticClass:"tr"},[i("div",{staticClass:"td1"},[i("div",{staticClass:"tImg"},[i("img",{attrs:{src:t.baseURL+e.coverUrl,alt:""}})]),i("a",{attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.insurance(e.id)}}},[t._v(t._s(e.translateName||e.sourceName))])]),i("div",{staticClass:"td2"},[t._v("$"+t._s(e.price))]),i("div",{staticClass:"td3"},[t._v(t._s(e.stock)+"件")]),i("div",{staticClass:"td4"},[i("div",{on:{click:function(i){t.getProductNumber(e.id,e.price,e.translateName||e.sourceName)}}},[t._v("立即購買")])])])})),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isOpen&&e.list.length>t.max,expression:"!isOpen && items.list.length > max"}],staticClass:"isOpen",on:{click:function(e){t.isOpen=!t.isOpen}}},[i("img",{attrs:{src:t.unfold,alt:""}}),t._v("展開全部 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen&&e.list.length>t.max,expression:"isOpen && items.list.length > max"}],staticClass:"isOpen",on:{click:function(e){t.isOpen=!t.isOpen}}},[i("img",{attrs:{src:t.packup,alt:""}}),t._v("收起 ")])],2)]):t._e()]})),i("el-dialog",{attrs:{title:"購買",visible:t.commodityDialog,width:"360px",size:"small","close-on-click-modal":!1,"custom-class":"dialogForm"},on:{"update:visible":function(e){t.commodityDialog=e}}},[i("h4",{staticClass:"title"},[t._v(" "+t._s(t.describe)+" ")]),i("el-divider"),i("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,rules:t.rules}},[i("el-form-item",{attrs:{label:"數量"}},[i("el-input-number",{attrs:{size:"small",min:1,"controls-position":"right"},on:{blur:t.abc,change:t.handleChange},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})],1),i("el-form-item",{attrs:{label:"價錢"}},[i("span",{style:{color:"#f66f45"}},[t._v("$"+t._s(t.price))])]),i("el-form-item",{attrs:{prop:"checked"}},[i("el-checkbox-group",{model:{value:t.form.checked,callback:function(e){t.$set(t.form,"checked",e)},expression:"form.checked"}},[i("el-checkbox",{attrs:{name:"type"}},[t._v("我同意公開報價和使用條款")])],1)],1),i("el-form-item",[i("el-button",{style:{marginLeft:"240px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提交訂單")])],1)],1)],1)],2)])},r=[],s=i("1da1"),n=(i("b64b"),i("a4d3"),i("4de4"),i("d3b7"),i("e439"),i("159b"),i("dbb4"),i("ade3"));function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}i("b680"),i("96cf");var l=i("c1fb"),u=i("72ac"),d=(i("4360"),i("5d2d")),f=i("2f62"),m={name:"Home",created:function(){this.getRoductList(),this.getClassificationList()},mounted:function(){},data:function(){return{unfold:i("4d5f"),packup:i("b988"),commodityDialog:!1,baseURL:u["a"].baseURL,max:5,isOpen:!1,category:[],price:"",originalPrice:"",describe:"",form:{productId:"",quantity:1,checked:[]},rules:{checked:[{type:"array",required:!0,message:"請勾選",trigger:"change"}]}}},components:{},methods:c(c({getRoductList:function(){},insurance:function(t){this.$router.push({path:"/productDetails/".concat(t)})},getClassificationList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.time(),Object(l["b"])().then((function(e){t.category=e.data.rows;var i=function(e){t.category.hasOwnProperty(e)&&Object(l["f"])({categoryId:t.category[e].id}).then((function(i){t.$set(t.category[e],"list",i.data.rows)}))};for(var o in t.category)i(o);console.log(t.category,"數組")})),console.timeEnd();case 3:case"end":return e.stop()}}),e)})))()},getProductNumber:function(t,e,i){this.commodityDialog=!0,this.form.productId=t,this.price=e,this.originalPrice=e,this.price=this.form.quantity*this.originalPrice,this.describe=i,console.log(t),console.log(e,"價格")}},Object(f["b"])(["shareIsDialog"])),{},{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log("submit!"),Object(l["c"])(e.form).then((function(t){if(console.log(t.data.code,"新增訂單"),200===t.data.code)e.$message({showClose:!0,message:t.data.msg+"，可以到我的訂單裏查看信息",type:"success",duration:5e3}),e.commodityDialog=!1,e.getClassificationList();else if(500===t.data.code)e.$message({showClose:!0,message:t.data.msg,type:"error"});else{if(401===t.data.code)return Object(d["b"])("toutiao-user"),e.commodityDialog=!1,e.$store.commit("shareIsDialog",!0),void setTimeout((function(){e.$message({showClose:!0,message:"請先登錄",type:"warning",duration:3e3})}),100);601===t.data.code&&(e.commodityDialog=!1,e.$message({showClose:!0,message:t.data.msg+"，請先充值",type:"error",duration:4e3}),e.$router.push({name:"recharge"}))}}))}))},resetForm:function(t){this.$refs[t].resetFields()},handleChange:function(t,e){t>=e?(this.price=this.$math.add(this.price,this.originalPrice).toFixed(2),console.log(t,"當前值")):e>=t?(console.log(e,"舊值"),this.price=this.$math.subtract(this.price,this.originalPrice).toFixed(2)):console.log("abc")},abc:function(){console.log("aaa"),this.price=this.form.quantity*this.originalPrice}})},p=m,h=(i("955c"),i("2877")),g=Object(h["a"])(p,o,r,!1,null,"1f4958a4",null);e["default"]=g.exports},dbb4:function(t,e,i){var o=i("23e7"),r=i("83ab"),s=i("56ef"),n=i("fc6a"),a=i("06cf"),c=i("8418");o({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,i,o=n(t),r=a.f,l=s(o),u={},d=0;while(l.length>d)i=r(o,e=l[d++]),void 0!==i&&c(u,e,i);return u}})},e439:function(t,e,i){var o=i("23e7"),r=i("d039"),s=i("fc6a"),n=i("06cf").f,a=i("83ab"),c=r((function(){n(1)})),l=!a||c;o({target:"Object",stat:!0,forced:l,sham:!a},{getOwnPropertyDescriptor:function(t,e){return n(s(t),e)}})}}]);